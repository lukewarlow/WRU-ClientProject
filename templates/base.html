<!DOCTYPE html>
<html>
  <head>
    {% block head %}
    <title>{{ title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="shortcut icon" href="/static/resources/images/favicon.ico" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
    <script type="text/javascript" src="/static/js/formhandling.js"></script>
    {% endblock %}
  </head>

  <body>
    <header class = "header-container">
      <div class = "header">
        <div class = "header-item logo">
          <img src="http://localhost:5000/static/resources/images/logo.png" alt="WRU Logo">
        </div>
        {% block header %}
        <div class = "header-item text">Welcome</div>
        {% endblock %}
        {% if isloggedin == True %}
        <form class = "header-item logoutform" action="/Logout" method="post">
          <button class = "logoutbutton" type="submit">Logout</button>
        </form>
        {% endif %}
        <nav class = "navbar-container">
          <ul class="navbar">
            <li><span id='connectionStatus'></span></li>
            <li><a href = "/Home"> Home </a></li>
            {% if isloggedin == False %}
            <li><a href="/Staff/Login"> Login </a></li>
            {% endif %}
            {% if isloggedin == True %}
            <li class = "dropdown staff">
              <label class = "droptext"> Staff Pages &#9660;</label>
              <div class = "dropdown-content staff">
              {% if isloggedin == True %}
                <a href="/Staff/EventForm"> Event Form </a>
                <a href="/Staff/TournamentForm"> Tournament Form </a>
              {% endif %}
              </div>
            </li>
            {% endif %}

            {% if admin == True %}
            <li class = "dropdown">
              <label class = "droptext"> Admin &#9660;</label>
              <div class = "dropdown-content">
                <a href="/Admin/AddStaff"> Add staff </a>
                <a href="/Admin/DeleteStaff"> Delete staff </a>
              </div>
            </li>
            {% endif %}
          </ul>
        </nav>
      </div>
    </header>

    <main class = "main-container">
      {% block main %}

      {% endblock %}
    </main>

    {% block footer %}
    <footer class = "footer-container"> <!-- Needs looking at -->
      <ul class="footer">
        <li><a class = "footer-item" href="mailto:AthertonA@cardiff.ac.uk"> Mail Alex </a></li>
        <li><a class = "footer-item" href="mailto:SmithHL2@cardiff.ac.uk"> Mail Holly </a></li>
        <li><a class = "footer-item" href="mailto:WarlowL@cardiff.ac.uk"> Mail Luke </a></li>
        <li><a class = "footer-item" href="http://www.wru.co.uk/eng/home.php"> Visit WRU </a></li>
        <li><a class = "footer-item">Â©2017</a></li>
      </ul>
    </footer>
    {% endblock %}
    <script>
      if('serviceWorker' in navigator)
      {
        navigator.serviceWorker
        .register('/SW')
        .then(function() { console.log("Service Worker Registered"); });
      }
      else console.log('Service worker not supported.');

      //Adapted from https://ponyfoo.com/articles/backgroundsync Accessed: 1/12/2017
      function updateConnectivityStatus ()
      {
        var connectionStatus = document.getElementById('connectionStatus');
        if (navigator.onLine)
        {
          console.log("Online");
          connectionStatus.className = "greencircle";
        }
        else
        {
          console.log("Offline");
          connectionStatus.className = "redcircle";
        }
      }

      window.addEventListener('online', updateConnectivityStatus);
      window.addEventListener('offline', updateConnectivityStatus);
      updateConnectivityStatus();
    </script>
  </body>
</html>
